## 交換フロー

### 京都ポイント → 他社ポイント

1. ユーザーがアプリで交換先を選択
2. 外部アカウント連携（初回のみ）
3. 交換ポイント数入力
4. 交換レート・手数料確認
5. 交換申請
6. 京都ポイント減算
7. 外部API連携
8. 他社ポイント加算
9. 完了通知

### 他社ポイント → 京都ポイント

1. ユーザーがアプリで交換元を選択
2. 外部アカウント連携（初回のみ）
3. 交換ポイント数入力
4. 交換レート・手数料確認
5. 交換申請
6. 外部API連携
7. 他社ポイント減算
8. 京都ポイント加算
9. 完了通知

## セキュリティ対策

### 不正利用防止
- 1日あたりの交換上限設定
- 1ヶ月あたりの交換上限設定
- 異常な交換パターンの検知
- 外部アカウント本人確認

### 監査ログ
- 全交換履歴の記録
- 外部API通信ログ
- エラー・失敗ログ
