# 📘 完全セットアップガイド - Windows環境

## 🎯 目標

ローカルPCでWebデモを起動して、ブラウザで完成形を確認する

---

## 📋 ステップバイステップ（30分）

### ステップ1: Node.jsのインストール（5分）

#### 1-1. ダウンロード

```
https://nodejs.org/
```

- 「20.x LTS」（推奨版）をクリック
- `node-v20.x.x-x64.msi` をダウンロード

#### 1-2. インストール

1. ダウンロードしたファイルをダブルクリック
2. 「Next」をクリック
3. ライセンスに同意
4. インストール先はデフォルトのまま
5. 「Install」をクリック
6. 完了まで待つ（2-3分）

#### 1-3. 確認

コマンドプロンプトを開く（Win + R → `cmd` → Enter）

```cmd
node --version
```

表示例: `v20.11.0`

```cmd
npm --version
```

表示例: `10.2.4`

---

### ステップ2: プロジェクトのダウンロード（3分）

#### 方法A: GitHubからZIPダウンロード

1. GitHubリポジトリページを開く
   ```
   https://github.com/YOUR_USERNAME/kyoto-point-system
   ```

2. 緑色の「Code」ボタンをクリック

3. 「Download ZIP」をクリック

4. ZIPファイルを解凍
   ```
   C:\kyoto-point-system\
   ```

#### 方法B: Git Clone（Gitインストール済みの場合）

```cmd
cd C:\
git clone https://github.com/YOUR_USERNAME/kyoto-point-system.git
cd kyoto-point-system
```

---

### ステップ3: 依存関係のインストール（5分）

#### 3-1. プロジェクトフォルダに移動

```cmd
cd C:\kyoto-point-system
```

または、エクスプローラーでフォルダを開いて:
- アドレスバーをクリック
- `cmd` と入力
- Enter

#### 3-2. ルートの依存関係をインストール

```cmd
npm install
```

**所要時間:** 2-3分

**表示例:**
```
added 1234 packages in 2m
```

#### 3-3. デモの依存関係をインストール

```cmd
cd packages\demo
npm install
```

**所要時間:** 1-2分

---

### ステップ4: デモの起動（2分）

#### 4-1. デモサーバーを起動

```cmd
npm run dev
```

**表示例:**
```
  VITE v5.0.8  ready in 500 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: http://192.168.1.100:5173/
  ➜  press h + enter to show help
```

#### 4-2. ブラウザでアクセス

```
http://localhost:5173
```

または、表示されたURLをCtrl+クリック

---

### ステップ5: デモの確認（5分）

#### トップページ

```
http://localhost:5173/
```

3つのデモが表示される:
1. ユーザーアプリ
2. 加盟店管理画面
3. 管理者ダッシュボード

#### ユーザーアプリを確認

1. 「ユーザーアプリ」をクリック
2. ポイント残高が表示される（5,000ポイント）
3. 各機能をクリックして確認

#### 加盟店管理画面を確認

1. ブラウザの「戻る」ボタン
2. 「加盟店管理画面」をクリック
3. QRコード生成などを確認

#### 管理者ダッシュボードを確認

1. ブラウザの「戻る」ボタン
2. 「管理者ダッシュボード」をクリック
3. 統計データを確認

---

## 🎬 デモの使い方

### ユーザーアプリ（モバイル風）

**URL:** `http://localhost:5173/user`

**機能:**
- ✅ ポイント残高確認
- ✅ QRコード決済（クリックでモック動作）
- ✅ ポイント交換（対応サービス表示）
- ✅ 利用履歴表示

**操作:**
1. 各メニューをクリック
2. アラートで機能説明が表示される
3. 実際のアプリの動作を確認

### 加盟店管理画面

**URL:** `http://localhost:5173/merchant`

**機能:**
- ✅ QRコード生成
- ✅ 取引履歴
- ✅ 売上確認

### 管理者ダッシュボード

**URL:** `http://localhost:5173/admin`

**機能:**
- ✅ 統計データ表示
- ✅ ユーザー管理
- ✅ ポイント付与

---

## 📱 スマートフォンで確認

### 同じWi-Fi内のスマホからアクセス

#### 1. PCのIPアドレスを確認

```cmd
ipconfig
```

`IPv4 アドレス` を確認（例: 192.168.1.100）

#### 2. スマホのブラウザでアクセス

```
http://192.168.1.100:5173/
```

#### 3. デモを確認

- スマホで実際のアプリのように操作
- タッチ操作対応
- レスポンシブデザイン

---

## 🛑 停止方法

### デモサーバーを停止

ターミナルで:
```
Ctrl + C
```

確認メッセージ:
```
Terminate batch job (Y/N)?
```

`Y` を入力してEnter

---

## 🔧 トラブルシューティング

### 問題1: Node.jsが認識されない

**エラー:**
```
'node' は、内部コマンドまたは外部コマンド...として認識されていません
```

**解決方法:**
1. コマンドプロンプトを再起動
2. PCを再起動
3. 環境変数PATHを確認

### 問題2: npm installが失敗

**エラー:**
```
npm ERR! code ENOENT
```

**解決方法:**
```cmd
# キャッシュをクリア
npm cache clean --force

# 再インストール
npm install
```

### 問題3: ポート5173が使用中

**エラー:**
```
Port 5173 is in use
```

**解決方法A: 別のポートを使用**
```cmd
npm run dev -- --port 3000
```

アクセス: `http://localhost:3000`

**解決方法B: 使用中のプロセスを終了**
```cmd
netstat -ano | findstr :5173
taskkill /PID <プロセスID> /F
```

### 問題4: ブラウザで表示されない

**確認事項:**
1. ターミナルにエラーが表示されていないか
2. URLが正しいか（`http://localhost:5173`）
3. ブラウザのキャッシュをクリア（Ctrl + F5）

**解決方法:**
```cmd
# デモを再起動
Ctrl + C
npm run dev
```

### 問題5: スマホからアクセスできない

**確認事項:**
1. PCとスマホが同じWi-Fiに接続されているか
2. PCのIPアドレスが正しいか
3. ファイアウォールが許可しているか

**解決方法:**
```
Windowsファイアウォールで許可:
1. コントロールパネル
2. Windows Defender ファイアウォール
3. 詳細設定
4. 受信の規則
5. 新しい規則
6. ポート 5173 を許可
```

---

## ✅ チェックリスト

### インストール前
- [ ] Windows 10/11
- [ ] インターネット接続
- [ ] 管理者権限（Node.jsインストール時）

### インストール後
- [ ] Node.js 20.x以上
- [ ] npm 10.x以上
- [ ] プロジェクトをダウンロード
- [ ] 依存関係をインストール

### 起動確認
- [ ] `npm run dev` が成功
- [ ] ターミナルにURLが表示
- [ ] ブラウザでアクセス可能
- [ ] デモが表示される

### 動作確認
- [ ] ユーザーアプリが動作
- [ ] 加盟店画面が動作
- [ ] 管理者画面が動作
- [ ] スマホからアクセス可能（オプション）

---

## 📊 フォルダ構成

```
C:\kyoto-point-system\
├── packages/
│   ├── api/              # バックエンドAPI
│   └── demo/             # Webデモ ← これを起動
│       ├── src/
│       │   ├── pages/    # 各画面
│       │   ├── components/
│       │   └── data/     # テストデータ
│       ├── package.json
│       └── vite.config.ts
├── docs/                 # ドキュメント
├── package.json
└── README.md
```

---

## 🎯 クイックコマンド集

```cmd
# プロジェクトフォルダに移動
cd C:\kyoto-point-system

# 依存関係をインストール
npm install
cd packages\demo
npm install

# デモを起動
npm run dev

# 別のポートで起動
npm run dev -- --port 3000

# デモを停止
Ctrl + C

# ビルド（本番用）
npm run build

# プレビュー
npm run preview
```

---

## 📚 参考ドキュメント

### 基本
- `README.md` - プロジェクト概要
- `START_HERE.md` - 最初に読むファイル
- `docs/QUICK_START.md` - クイックスタート

### セットアップ
- `docs/SETUP.md` - 詳細セットアップ
- `INSTALL_FIRST.md` - Node.jsインストール
- `DOCKER_ONLY_SETUP.md` - Docker使用

### デモ
- `START_WEB.md` - Webデモ起動（このファイル）
- `DEMO_SETUP.md` - デモ環境構築
- `WEB_DEMO_QUICK.md` - オンラインデモ

### トラブルシューティング
- `CODESPACES_TROUBLESHOOTING.md`
- `QUICK_START_ALTERNATIVES.md`

---

## 💡 次のステップ

### デモを確認したら

1. **カスタマイズ**
   - テーマカラーを変更
   - テストデータを変更
   - 新しい機能を追加

2. **スクリーンショット撮影**
   - プレゼン資料用
   - ドキュメント用

3. **本番開発**
   - APIサーバーを起動
   - データベースを接続
   - 実際の機能を実装

---

## 🎉 完了！

デモが起動できたら、以下にアクセス:

```
http://localhost:5173
```

3つのデモを確認:
1. ユーザーアプリ
2. 加盟店管理画面
3. 管理者ダッシュボード

**お疲れ様でした！**
